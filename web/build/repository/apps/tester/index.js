$.widget("apps.tester",$.winnies.appDialog,{version:"1.0.0",doLog:!0,container:null,find:null,by:null,output:null,crossIndex:null,cnt:0,_init:function(){this._super()},_create:function(){var a={indexes:{id:"",path:"",tester:0}};return this.crossIndex=new core.util.crossIndex(a),this._super()},contentLoaded:function(a){var b=this;this.find=this.fec("find"),this.by=this.fec("by"),this.output=this.fec("output"),this.fec("wipebutton").button().click(function(a,b){core.system.wipe()}),this.fec("removebutton").button().click(function(a,c){b.crossIndex.remove(b.find.val(),b.by.val(),function(a,b){a?console.debug(a):console.debug("removed")})}),this.fec("findbutton").button().click(function(a,c){b.crossIndex.find(b.find.val(),b.by.val(),function(a,c){b.output.empty(),a?b.output.text(a):(oldConsole.debug("result in app:"),oldConsole.debug(c),$.each(c.data,function(a,c){b.output.append(a+" : "+c+"<br/>")}))})}),this.fec("addbutton").button().click(function(a,c){b.addToCrossindex()}),this.fec("updatetextbutton").button().click(function(a,c){b.crossIndex.update(b.find.val(),b.by.val(),{data:{text:"Changed text!"}},function(a,c){a?b.output.text(a):console.log("text is updated")})}),this.fec("updatenewbutton").button().click(function(a,c){b.crossIndex.update(b.find.val(),b.by.val(),{data:{foo:"foo add"}},function(a,c){a?b.output.text(a):console.log("foo is added")})}),this.fec("updateindexbutton").button().click(function(a,c){b.crossIndex.update(b.find.val(),b.by.val(),{indexes:{id:"myid-25",tester:50}},function(a,c){a?b.output.text(a):(console.log("id is updated to: myid-25"),oldConsole.debug(c))})}),this.fec("updatewrongindexbutton").button().click(function(a,c){b.crossIndex.update(b.find.val(),b.by.val(),{indexes:{wrong:"myid-25"}},function(a,c){a?b.output.text(a):console.log("must be in error")})}),this.fec("clearbutton").button().click(function(a,c){b.crossIndex.clear()}),this.fec("destroybutton").button().click(function(a,c){b.crossIndex.destroy()})},addToCrossindex:function(){var a=this.crossIndex.baseObject();a.indexes.id="myid-"+this.cnt,a.indexes.path="myPath-"+this.cnt,a.indexes.tester=this.cnt,a.data.text="some text, not unique- "+this.cnt,a.data.something="just something new "+this.cnt,this.cnt+=1,this.crossIndex.add(a)},_setOption:function(a,b){this._super(a,b)},_setOptions:function(a){this._super(a)},_destroy:function(){this._super()},logging:function(a){this.doLog&&console.log(this.widgetName+" :: "+a)},fec:function(a){return this.element.find("._winnies_"+this.widgetName+"_"+a)},_trigger:function(a,b,c){"close"==a&&this._destroy(),"contentLoaded"==a&&this.contentLoaded(c),this._super(a,b,c)}});